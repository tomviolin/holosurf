Instructions:

This runs on Ubuntu with a NVidia card that has CUDA 11.x or 12.x.
Make sure you have the latest CUDA drivers for your card.

TO INSTALL
Open a terminal.
cd to the directory under which you want to install holosurf
run these commands one line at a time, by copy and paste:

---- begin bash commands ----
git clone https://github.com/tomviolin/holosurf
cd holosurf
./setup.sh
wget -O holsurf.tar.gz 'https://drive.google.com/file/d/1IgrqIjhcmsLBKlywZag9NvgJxSeNuBIP/view?usp=sharing'
tar -xvf holosurf.tar.gz
---- end bash commands ----


TO RUN:
cd to the holosurf directory.
run the following command:

---- begin bash commands ----
./run.sh
---- end bash commands ----

If it fails at any point try the following:
sudo apt install dialog

USING THE PROGRAM:

If everythings worked, you should see a window with a hologram.  Near the top there will be info on the z value being reconstructed, and the hologram file
current being reconstructed.

KEYS TO PRESS:

IMAGE SEQUENCING/SLIDES
The right arrow key selects the next hologram image. If you hit the end of the images, it just stays there.
The left arrow select the previous image. If you hit the beginning, it just stays there.

MOVING/FOCUSING AT DIFFERENT DEPTHS:
The up arrow moves the point of focus farther away from the image sensor.
The down arrow moves the point of focus closer to the image sensor.

The are also a set of pairs of keys for moving up or down through the depth field at different rates, similar to
the up and down arrows:

The Y/H pair goes up/down in 100 steps of Z.
The U/J pair goes up/down in 10 steps of Z (like the arrow keys).
The I/K pair goes up/down in 1 step of Z.

You can also use the comma to back an image, and the period to go forward, in the same exact way as
the arrow keys. These two keys were selected because

(a) many video players and YouTube uses those two keys for stepping through a video file on frame at a time. 
(b) On most keyboards the shifted characters for the , and . characters are < and > which resemble arrows pointing to the left and right. 
(c) Finally they are closer to the alternate depth controlling keys which can help if you are operating the viewer with one hand.



---- tech details ----

datasets (sets of holograms) are all stored in directories under 
the "data" subdirectory.  They must be of the form, including the data folder itself:

data/dataset_name/raw
    file01.png
    file02.png
       :   :
    filenn.png

The filenames under the "raw" subdirectory do not need to follow
any given pattern; name them as you will.

The programs/scripts functions are briefly as follows:

src/holo-00-capture.sh   captures images from a image source. Creates
input: cam               a directory "data/cap20YY-MMDD-HHmmss" to store
output: raw/             the images captured. No cropping or other
			 image manipulation is currently done.

src/holo-01-crop.sh      uses ImageMagick's convert command using the
input: raw/              following options:
output: cropped/         -thumbnail 512     resizes the hologram to be
			                    512 pixels wide. The height
					    is adjusted to maintain the 
					    same aspect ratio.
			-crop 512x512+0+128 crops the image to take a 
			                    512x512 region of the image
					    starting 128 pixels down
					    from the top.
			The converted images are given the same names as
			the original names, but placed in a 
src/holo-02-cleanqts.py This program takes the cropped and sized holograms
input: cropped/         and performs neighbor subtraction to gratly reduce
output: holo/           the interference from particles and surfaces
                        that are attached to or are a part of the
			instrumentation, thus leaving the interference
			patterns of objects that were moving from 
			frame to frame.



